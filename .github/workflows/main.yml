name: Multi-job CI Demo

on:
  workflow_dispatch:
    inputs:
      project_name:
        description: "Name of the project"
        required: true
        default: "my-app"
        type: string

      run_tests:
        description: "Run tests?"
        required: false
        default: true
        type: boolean

      enable_lint:
        description: "Run lint checks?"
        required: false
        default: false
        type: boolean

      runtime:
        description: "Select runtime environment"
        required: true
        default: "node"
        type: choice
        options:
          - node
          - python
          - go

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      # Setup based on runtime input
      - name: Setup Node
        if: ${{ github.event.inputs.runtime == 'node' }}
        uses: actions/setup-node@v4
        with:
          node-version: 18

      - name: Setup Python
        if: ${{ github.event.inputs.runtime == 'python' }}
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Setup Go
        if: ${{ github.event.inputs.runtime == 'go' }}
        uses: actions/setup-go@v5
        with:
          go-version: '1.21'

      - name: Run build
        run: echo "ğŸ”¨ Building ${{ github.event.inputs.project_name }} with ${{ github.event.inputs.runtime }}"

  test:
    runs-on: ubuntu-latest
    needs: build
    if: ${{ github.event.inputs.run_tests == 'true' }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Run tests
        run: echo "âœ… Running tests for ${{ github.event.inputs.project_name }}"

  lint:
    runs-on: ubuntu-latest
    needs: build
    if: ${{ github.event.inputs.enable_lint == 'true' }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Run lint checks
        run: echo "ğŸ” Running linter for ${{ github.event.inputs.project_name }}"
